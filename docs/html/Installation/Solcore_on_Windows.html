
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Solcore on Windows 10 &#8212; Solcore 5.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Solcore 5.3.0 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/header2.png" alt="Logo"/>
            </a></p>
<h3><a href="../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation and configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Structures/structure.html">Structures and support classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Systems/systems.html">Materials and units</a></li>
<li class="toctree-l1"><a class="reference internal" href="../QM/Schrodinger.html">Quantum Solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spectral/spectral.html">Light Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Optics/optics.html">Optical methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Solvers/solving_solar_cells.html">Solar cell solvers</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/Installation/Solcore_on_Windows.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="solcore-on-windows-10">
<span id="solcore-on-windows-10"></span><h1>Solcore on Windows 10<a class="headerlink" href="#solcore-on-windows-10" title="Permalink to this headline">¶</a></h1>
<p>The Python part of Solcore, which is the majority, should work under Windows with no problems. However, we have found a lot trouble trying to make the parts and complements that require compilation to work properly (the PDD solver, S4, SMARTS and SPICE). For those who need to use those tools, please follow the instructions below.</p>
<div class="section" id="installing-solcore">
<span id="installing-solcore"></span><h2>Installing Solcore<a class="headerlink" href="#installing-solcore" title="Permalink to this headline">¶</a></h2>
<p>(thanks Phoebe!)</p>
<p>After a lot of effort, we have Solcore fully up and running in Windows 10… more or less, using the Ubuntu shell that comes with Windows 10. To install Solcore there, follow this steps:</p>
<p>All steps on fresh install of Ubuntu (using the Ubuntu terminal on
Windows 10 distributed by Canonical Group, Ubuntu 16.04.3 LTS, Codename:
xenial)</p>
<ul class="simple">
<li>Install git if not done already</li>
<li>Install python 3.x if not already done</li>
<li>Install pip3 (for installing Python3 packages; you may need to update the package list first: sudo apt-get update)::</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo apt install python3-pip
</pre></div>
</div>
<ul class="simple">
<li>You need LAPACK and BLAS libraries linked to the -llapack and -lblas library flags – these are used for scipy and S4. The developers of S4 recommend OpenBLAS (you can find installation instructions by Googling), but this also works and is simpler:</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo apt-get install libblas-dev liblapack-dev
</pre></div>
</div>
<ul class="simple">
<li>Install NumPy:</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip3 install numpy
</pre></div>
</div>
<ul class="simple">
<li>Install matplotlib (and tk, otherwise get an error later):</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip3 install matplotlib
sudo apt-get install python3-tk 
</pre></div>
</div>
<ul class="simple">
<li>Other dependencies install automatically &amp; successfully when
installing Solcore5… hopefully.</li>
<li>Now, we actually Install Solcore::</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git clone https://github.com/dalonsoa/solcore5.git
<span class="nb">cd</span> solcore5
sudo python3 setup.py install
</pre></div>
</div>
</div>
<div class="section" id="installing-s4">
<span id="installing-s4"></span><h2>Installing S4<a class="headerlink" href="#installing-s4" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The “make” command must be available:</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo apt install make
</pre></div>
</div>
<ul class="simple">
<li>You must use the fork of S4 at https://github.com/phoebe-p/S4; the
main branch is not compatible with Python 3.x:</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git clone https://github.com/phoebe-p/S4.git
<span class="nb">cd</span> S4
make S4_pyext
</pre></div>
</div>
</div>
<div class="section" id="checking-if-everything-works">
<span id="checking-if-everything-works"></span><h2>Checking if everything works<a class="headerlink" href="#checking-if-everything-works" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>To see if the PDD is working:</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span>python3
&gt;&gt;&gt; import solcore.solar_cell_solver
</pre></div>
</div>
<ul class="simple">
<li>Run tests:</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo python3 setup.py <span class="nb">test</span>
</pre></div>
</div>
<p>This might result in an error saying that quantum mechanics failed because 5\ :sup:<code class="docutils literal"><span class="pre">th</span></code> decimal place of result doesn’t match. Simply, ignore it.</p>
<ul class="simple">
<li>Other information:<ul>
<li>gcc/g++/gfortran versions used here: gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.6)</li>
<li>If everything is working correctly, should be able to import
solcore.solar_cell_solver without getting warnings about the RCWA
solver or PDD.</li>
<li>Sometimes, an issue arises with the SOPRA database (and occasionally
importing solar_cell_solver?) where the permissions are set such that
you cannot access the database – running sudo python3, or sudo
[whatever python editor you’re using] fixes this.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="installing-smarts-windows10-ubuntu-shell">
<span id="installing-smarts-windows10-ubuntu-shell"></span><h2>Installing SMARTS Windows10/Ubuntu Shell<a class="headerlink" href="#installing-smarts-windows10-ubuntu-shell" title="Permalink to this headline">¶</a></h2>
<p>(thanks Andrew!)</p>
<ul class="simple">
<li>Register and download SMARTS FOR MAC from http://www.nrel.gov/rredc/smarts/    Yes, we are going to use a Mac software on Windows. Hold on tight.</li>
<li>Move the SMARTS_xxx_Mac.tar.gz file from Windows to the dedicated Ubuntu folder (e.g. ~$ mv /mnt/c/Users/Andrew/Downloads ~/)</li>
<li>Unpack the file (~$ tar zxf SMARTS_xxx_Mac.tar.gz)</li>
<li>The executable script “smarts295.command” in the folder won’t work (try running ~$ ./smarts295.command). For example on 64bit Windows the following error is thrown, requiring the source to be recompiled:</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span>Source_code/smarts295_cmd: 1: Source_code/smarts295_cmd: dJ: not found
Source_code/smarts295_cmd: 1: Source_code/smarts295_cmd: ȅ8__PAGEZERO__TEXT: not found
Source_code/smarts295_cmd: 1: Source_code/smarts295_cmd: Syntax error: word unexpected (expecting &quot;)&quot;)
</pre></div>
</div>
<div class="section" id="recompiling-smarts">
<span id="recompiling-smarts"></span><h3>Recompiling SMARTS<a class="headerlink" href="#recompiling-smarts" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Move to the directory /SMARTS_295_Mac/Source_code/</li>
<li>Delete the file “smarts295_cmd” (type ~$ rm smarts_cmd). This will need to be recompiled on for your CPU architecture</li>
<li>Assuming you have gfortran installed (either as part of Anaconda or another third party distribution) you should compile smarts (type ~$ gfortran smarts295.f) which results in an executable called “a.out”<ul>
<li>N.B. Although the SMARTS documentation suggests changing some flags in the source code you <em>should not modify</em> the SMARTS source code.  Solcore expects the default behaviour with respect to batch mode and file overwrites.</li>
</ul>
</li>
<li>Rename the file “a.out” to “smarts295_cmd”. Now SMARTS has been recompiled for your CPU architecture.</li>
<li>IMPORTANT FOR WINDOWS: Solcore on Windows10/Ubuntu looks for the script called “smarts295”, instead of “smarts295.command”, due to different naming systems in Linux and Mac. Rename “smarts295.command” to just “smarts295”.</li>
<li>You can test the installation of SMARTS using the example file Figure8.py</li>
<li>Please note that running SMARTS from the command line (typing ~$ ./smarts295) will produce two text files, “smarts295.ext.txt” and “smarts295.out.txt”.
If these are in the SMARTS root folder, they will mess up running SMARTS on Solcore. If you do run SMARTS in the command line, remove these files when you are done.</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">Solcore 5.3.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Quantum Photovoltaics Group, Imperial College London.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.
    </div>
  </body>
</html>